{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Incluye Bootstrap CSS desde el CDN -->

    <!-- Bootstrap Icons (para usar íconos de Bootstrap) -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- Font Awesome (para otros íconos) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'core/css/estilos.css' %}" />
    <link
      rel="stylesheet"
      href="{% static 'core/css/estilosProductos.css' %}"
    />

    <title>Productos Disponibles</title>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark navbar">
        <div class="container-fluid">
          <!--Logo de la App-->
          <a href="{% url 'home' %}">
            <img
              src="{% static 'core/img/logo.png' %}"
              alt="Logo de la App"
              class="logo-img"
            />
          </a>

          <!-- Botón menú (oculto)-->
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon white-icon"></span>
          </button>
          <div
            class="collapse navbar-collapse text-white"
            id="navbarSupportedContent"
          >
            <!--Barra de búsqueda-->
            <form class="d-flex nav-search-div" role="search">
              <input
                class="input me-2"
                type="text"
                placeholder="Buscar"
                aria-label="Search"
              />

              <button class="boton-search">
                <i class="fas fa-search"></i>
              </button>
            </form>

            <!-- Links de Navegación -->
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                <a href="{% url 'home' %}" class="nav-link">Home</a>
              </li>

              <li class="nav-item">
                <a href="{% url 'acercade' %}" class="nav-link">Acerca de</a>
              </li>
              <li class="nav-item">
                <a href="{% url 'contacto' %}" class="nav-link">Contacto</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <main>

      <!--/ BANNER SECTION-->
      <div class="carrousel-banner justify-content-center align-items-center">
        <div class="row  justify-content-center ">
          <div class="col-md-10 ">
            <div
                    id="productCarousel"
                    class="carousel slide "
                    data-bs-ride="carousel"

            >
              <div class="carousel-inner ">
                <div class="carousel-item active">
                  <img
                          src="https://central-content.portal-movilidad.simplitec.io/assets/f0c4ced6-3389-4d56-9c26-ec7ed36da8e2?format=webp"
                          class=" image-product image-banner"
                          alt="Product 1"
                  />
                </div>
                <div class="carousel-item">
                  <img
                          src="https://central-content.portal-movilidad.simplitec.io/assets/562cd039-de45-4607-8906-95825a48a876?format=webp"
                          class=" image-product image-banner"
                          alt="Product 2"
                  />
                </div>
                <div class="carousel-item">
                  <img
                          src="https://central-content.portal-movilidad.simplitec.io/assets/617ced6a-3a08-4818-8c0f-81b9b798c9ea?format=webp"
                          class="image-product image-banner"
                          alt="Product 3"
                  />
                </div>
                <div class="carousel-item">
                  <img
                          src="https://castillo.vtexassets.com/assets/vtex.file-manager-graphql/images/9ec5681e-0d97-436f-ad83-0d51de04dd58___c641f68c40e0ba3dd1833643267539fc.png"
                          class="image-product image-banner"
                          alt="Product 4"
                  />
                </div>
              </div>
              <button
                      class="carousel-control-prev"
                      type="button"
                      data-bs-target="#productCarousel"
                      data-bs-slide="prev"
              >
              <span
                      class="carousel-control-prev-icon"
                      aria-hidden="true"
              ></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button
                      class="carousel-control-next"
                      type="button"
                      data-bs-target="#productCarousel"
                      data-bs-slide="next"
              >
              <span
                      class="carousel-control-next-icon"
                      aria-hidden="true"
              ></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <section class="py-5 todos-productos-principal">
        <h1 class="text-center mb-4 card-title fs-1">Productos Disponibles</h1>
        <div class="container">
          <div class="row   justify-content-center">
            {% for producto in productos %}
            <div class="col-md-4 col-sm-6 mb-4">
              <div class="producto-card">
                <!-- Imagen principal del producto -->
                <div class="imagen-container ">
                        <img src="{{ producto.imagen_principal.url }}" class="img-fluid producto-img" alt="{{ producto.nombre }}" />
                        
                        <!-- Botón para abrir la ventana modal -->
                        <button type="button" class="btn btn-primary ver-galeria-btn" data-bs-toggle="modal" data-bs-target="#modal{{ producto.id }}">
                            Ver Galería
                        </button>
                    </div>
                <div class="card-body">
                  <!-- Nombre y descripción del producto -->
                  <div class="producto-info">
                    <h5 class="card-title">{{ producto.nombre }}</h5>
                    <p class="card-text">{{ producto.descripcion }}</p>
                    <div class="price-content">
                    <p class="card-pricePrev">${{ producto.precioAnterior }}</p>
                    <p class="card-descuento">%{{ producto.calcular_descuento}} OFF</p>
                    </div>
                    <p class="card-price">
                      <strong>$ {{ producto.precio }}</strong>
                    </p>
                    <p class="card-coutas">en 6 x ${{ producto.calcular_coutas}}</p>
                  </div>
                </div>
                              <button type="button" class="btn-comprar btn-primary" >
                            COMPRAR
                        </button>
              </div>
              
            </div>

            <!-- Modal para galería de imágenes -->
            <div
              class="modal fade"
              id="modal{{ producto.id }}"
              tabindex="-1"
              aria-labelledby="modalLabel{{ producto.id }}"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header justify-content-center ">
                    <h5 class="modal-title " id="modalLabel{{ producto.id }}">
                    {{ producto.nombre }}
                    </h5>
     
                  </div>
                  <div class="modal-body">
                    <!-- Carrusel de imágenes -->
                    <div
                      id="carousel{{ producto.id }}"
                      class="carousel slide"
                      data-bs-ride="false"
                    >
                      <div class="carousel-inner">
                        {% for imagen in producto.imagenes.all %}
                        <div
                          class="carousel-item {% if forloop.first %}active{% endif %}"
                        >
                          <img
                            src="{{ imagen.imagen.url }}"
                            class="d-block w-100 imagen-modal"
                            alt="Imagen de {{ producto.nombre }}"
                          />
                        </div>
                        {% endfor %}
                      </div>
                      <!-- Controles de navegación del carrusel -->
                      <button
                        class="carousel-control-prev"
                        type="button"
                        data-bs-target="#carousel{{ producto.id }}"
                        data-bs-slide="prev"
                      >
                        <span
                          class="fas fa-chevron-left
                          aria-hidden="true"
                        ></span>
                        <span class="visually-hidden">Previous</span>
                      </button>
                      <button
                        class="carousel-control-next"
                        type="button"
                        data-bs-target="#carousel{{ producto.id }}"
                        data-bs-slide="next"
                      >
                        <span
                          class="fas fa-chevron-right"
                          aria-hidden="true"
                        ></span>
                        <span class="visually-hidden">Next</span>
                      </button>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-bs-dismiss="modal"
                    >
                      Cerrar
                    </button>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>

          <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
              {% if productos.has_previous %}
              <li class="page-item">
                <a
                  class="page-link"
                  href="?page={{ productos.previous_page_number }}"
                  >Anterior</a
                >
              </li>
              {% else %}
              <li class="page-item disabled">
                <span class="page-link">Anterior</span>
              </li>
              {% endif %} {% for num in productos.paginator.page_range %}
              <li
                class="page-item {% if productos.number == num %}active{% endif %}"
              >
                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
              </li>
              {% endfor %} {% if productos.has_next %}
              <li class="page-item">
                <a
                  class="page-link"
                  href="?page={{ productos.next_page_number }}"
                  >Siguiente</a
                >
              </li>
              {% else %}
              <li class="page-item disabled">
                <span class="page-link">Siguiente</span>
              </li>
              {% endif %}
            </ul>
          </nav>
        </div>
      </section>
    </main>

    <!--Footer-->
    <footer class="text-white text-center footer-container bg-footer">
      <!-- Grid container -->
      <div class="container p-4 footer-container">
        <!--Grid row-->
        <div class="row mt-4">
          <!--Grid column-->
          <div class="col-lg-4 col-md-12 mb-4 mb-md-0">
            <h5 class="text-uppercase mb-4">Sobre Nosotros</h5>
            <p>
              "SML: Simplificamos tu Mundo con Lo mejor en electrodomésticos."
            </p>
          </div>

          <!--Grid column-->
          <div class="grid-column col-lg-4 col-md-6 mb-4 mb-md-0">
            <ul class="fa-ul" style="margin-left: 1.65em">
              <li class="mb-3">
                <span class="fa-li"><i class="fas fa-home"></i></span
                ><span class="ms-2"
                  >San Salvador de Jujuy, 4600, Argentina</span
                >
              </li>
              <li class="mb-3">
                <span class="fa-li"><i class="fas fa-envelope"></i></span
                ><span class="ms-2">Email: contacto@aplicacion.com</span>
              </li>
              <li class="mb-3">
                <span class="fa-li"><i class="fas fa-phone"></i></span
                ><span class="ms-2">Teléfono: 388-508-4464</span>
              </li>
            </ul>
          </div>

          <!--Grid column-->
          <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
            <h5 class="text-uppercase mb-4">Horario de atención</h5>

            <table class="table text-center text-white">
              <tbody class="fw-normal">
                <tr>
                  <td>Lunes - Viernes:</td>
                  <td>8am - 9pm</td>
                </tr>
                <tr>
                  <td>Sabados - Domingos:</td>
                  <td>8am - 1am</td>
                </tr>
              </tbody>
            </table>
          </div>
          <!--Grid column-->
        </div>
        <!--Grid row-->
      </div>
      <!-- Grid container -->

      <!-- Copyright -->
      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
        © 2024 Copyright Fi Unju:
      </div>
    </footer>

    <!-- Incluye Bootstrap JavaScript desde el CDN -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"></script>
  </body>
</html>
